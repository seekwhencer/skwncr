networks:
  apply-o-mat:
    external: false
    name: ${PROJECT_NAME}
  proxy_default:
    external: true

services:
  apply-o-mat_server:
    extends:
      file: docker-compose-server.yml
      service: apply-o-mat_server

    # replace this
    #command: 'tail -f /dev/null'
    command: 'npm start'

    networks:
      - apply-o-mat
      - proxy_default

    volumes:
      - .:/app

    environment:
      - DEBUG=true
      - ENVIRONMENT=default
      - SERVER_PORT=${SERVER_PORT}

      - VIRTUAL_HOST=${PROJECT_NAME}.servant
      - VIRTUAL_PORT=${SERVER_PORT}
      - HOST_IP=${HOST_IP}
